"use strict";(globalThis["webpackChunksupplication"]=globalThis["webpackChunksupplication"]||[]).push([[442],{442:(o,n,t)=>{t.r(n),t.d(n,{default:()=>k});var i=t(9835),e=t(6970),a=t(1957),s=t(499),c=t(4136),l=function(o,n,t,i){function e(o){return o instanceof t?o:new t((function(n){n(o)}))}return new(t||(t=Promise))((function(t,a){function s(o){try{l(i.next(o))}catch(n){a(n)}}function c(o){try{l(i["throw"](o))}catch(n){a(n)}}function l(o){o.done?t(o.value):e(o.value).then(s,c)}l((i=i.apply(o,n||[])).next())}))};const u=o=>((0,i.dD)("data-v-ccfbe0ee"),o=o(),(0,i.Cn)(),o),p={class:"key-words-container"},v=u((()=>(0,i._)("div",{class:"logo-area"},null,-1))),d=(0,i.aZ)({__name:"IndexPage",setup(o){const n=(0,s.iH)(!0),t=(0,s.iH)(0),u=(0,s.iH)(!0),d=(0,s.iH)(!1),r=(0,s.iH)([]);let w;const g={option1:0,option2:0,option3:0,option4:0,option5:0,option6:0,option7:0,option8:0,option9:0,option10:0},y=(0,s.iH)(Object.assign({},g)),f=(0,s.iH)(Object.assign({},g));function k(){const o=document.querySelector(".wrap"),n=document.querySelector(".key-words-container"),t=new Image;t.onload=function(){const i=t.height,e=i*(4.3/15)*(window.innerWidth/t.width);o.style.paddingTop=`${e}px`,n.style.height=`calc(100vh - ${e}px - 4rem)`,d.value=!0},t.src="https://tsg-image-1258344700.cos.ap-shanghai.myqcloud.com/v_jialetao/bg_guanjianci_01.png"}function h(o){f.value[o]++,y.value[o]++,console.log(`\n[resDuration]: ${t.value}\n上次请求收到响应后经过的时间\n\n[option]: ${o}\n本次点击的 option\n\n[countAll]: ${JSON.stringify(y.value)}\n[countCur]: ${JSON.stringify(f.value)}\n\n[isFirstPost]: ${n.value}\n是否是首次提交\n\n[isResponsed]: ${u.value}\n是否收到了服务端的响应结果\n`),m()}function _(){const o=Object.assign({},g);return Object.keys(f.value).forEach((n=>{const t=f.value[n];0===t?delete o[n]:o[n]=t})),o}function m(){const o=Object.keys(_()).length>0;if(o)if(n.value)n.value=!1,u.value=!1,z();else if(t.value>5)u.value=!1,z();else if(u.value)return u.value=!1,void setTimeout(z,1e3)}function z(){return l(this,void 0,void 0,(function*(){const o=_();f.value=Object.assign({},g),t.value=0;const n=yield c.api.post("/add/count",JSON.stringify(o),{headers:{"Content-Type":"application/json"}});console.log("收到了服务端响应的结果：",n),u.value=!0}))}function b(){return l(this,void 0,void 0,(function*(){const o=yield c.api.post("config/kv",{keys:[{table:"config",key:"optionNumber"}]},{headers:{"Content-Type":"application/json"}});console.log("getKeyWordsLen [res]:",o)}))}function C(){return l(this,void 0,void 0,(function*(){const o=yield c.axios.get("https://rainbow-1258344702.cos.ap-guangzhou.myqcloud.com/edde067f-0d1d-4df5-b577-5a2dd96656b2/2024AnnualParty/question/keywords.txt");console.log("getKeyWords [res]:",o),o.data&&"string"===typeof o.data&&(r.value=o.data.split(","),console.log("keywords:",r.value))}))}function F(){return l(this,void 0,void 0,(function*(){const o=yield c.api.get("get/count");console.log("getStatistics [res]:",o),o.data&&(y.value=o.data)}))}return(0,i.bv)((()=>l(this,void 0,void 0,(function*(){C(),k(),F(),w&&clearInterval(w),w=setInterval((()=>{t.value++,m()}),1e3)})))),window.data={getKeyWords:C,getStatistics:F,getKeyWordsLen:b},(o,n)=>{const t=(0,i.up)("q-page");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(t,{class:"wrap"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",p,[(0,i._)("div",{class:"option-item",onClick:n[0]||(n[0]=o=>h("option1"))},[(0,i.Uk)((0,e.zw)(r.value[0]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option1"]),513),[[a.F8,0!==y.value["option1"]]])]),(0,i._)("div",{class:"option-item",onClick:n[1]||(n[1]=o=>h("option2"))},[(0,i.Uk)((0,e.zw)(r.value[1]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option2"]),513),[[a.F8,0!==y.value["option2"]]])]),(0,i._)("div",{class:"option-item",onClick:n[2]||(n[2]=o=>h("option3"))},[(0,i.Uk)((0,e.zw)(r.value[2]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option3"]),513),[[a.F8,0!==y.value["option3"]]])]),(0,i._)("div",{class:"option-item",onClick:n[3]||(n[3]=o=>h("option4"))},[(0,i.Uk)((0,e.zw)(r.value[3]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option4"]),513),[[a.F8,0!==y.value["option4"]]])]),(0,i._)("div",{class:"option-item",onClick:n[4]||(n[4]=o=>h("option5"))},[(0,i.Uk)((0,e.zw)(r.value[4]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option5"]),513),[[a.F8,0!==y.value["option5"]]])]),(0,i._)("div",{class:"option-item",onClick:n[5]||(n[5]=o=>h("option6"))},[(0,i.Uk)((0,e.zw)(r.value[5]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option6"]),513),[[a.F8,0!==y.value["option6"]]])]),(0,i._)("div",{class:"option-item",onClick:n[6]||(n[6]=o=>h("option7"))},[(0,i.Uk)((0,e.zw)(r.value[6]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option7"]),513),[[a.F8,0!==y.value["option7"]]])]),(0,i._)("div",{class:"option-item",onClick:n[7]||(n[7]=o=>h("option8"))},[(0,i.Uk)((0,e.zw)(r.value[7]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option8"]),513),[[a.F8,0!==y.value["option8"]]])]),(0,i._)("div",{class:"option-item",onClick:n[8]||(n[8]=o=>h("option9"))},[(0,i.Uk)((0,e.zw)(r.value[8]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option9"]),513),[[a.F8,0!==y.value["option9"]]])]),(0,i._)("div",{class:"option-item",onClick:n[9]||(n[9]=o=>h("option10"))},[(0,i.Uk)((0,e.zw)(r.value[9]||"空")+" ",1),(0,i.wy)((0,i._)("span",{class:"icon-statistic"},"+"+(0,e.zw)(y.value["option10"]),513),[[a.F8,0!==y.value["option10"]]])])],512),[[a.F8,d.value]])])),_:1}),v],64)}}});var r=t(1639),w=t(9885),g=t(9984),y=t.n(g);const f=(0,r.Z)(d,[["__scopeId","data-v-ccfbe0ee"]]),k=f;y()(d,"components",{QPage:w.Z})}}]);